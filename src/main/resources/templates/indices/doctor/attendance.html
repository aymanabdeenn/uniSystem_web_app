<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Attendance</title>
    <link rel="stylesheet" th:href="@{/styles/styleDoctor/styleAttendance.css}" />
  </head>
  <body>
  <div class="sidebar">
    <div class="nameCard">
      <p class="doctorName name">Dr.</p>
      <p class="doctorName" th:text="${doctor.name}"></p>
      <p class="facultyName">Faculty of</p>
      <p class="facultyName" th:text="${doctor.faculty.name}"></p>
    </div>
    <div class="choices">
      <a class="choice" th:href="@{/doctor/doctorUI}">Home</a>
      <a class="choice" th:href="@{/doctor/personalInformation}"
      >Personal Information</a
      >
      <a class="choice" th:href="@{/shared/showMyCourses}">My Courses</a>
      <a class="choice" th:href="@{/doctor/attendanceForm}"
      >Attendance</a
      >
    </div>
    <form class="logout" method="POST" th:action="@{/logout}">
      <button class="logoutButton choice">Logout</button>
    </form>
  </div>
    <div class="container">
      <div class="attendanceComponents">
        <form class="attendanceForm" method="POST" th:action="@{/doctor/takeAttendance}" th:object="${attendanceFormDTO}">
          <div class="btns">
            <div class="btn checkBtn" id="allAbsences">
              <p class="text btnText">All Absent</p>
              <input type="checkbox" id="allAbsences-checkbox" />
            </div>
            <div class="btn checkBtn" id="allAttendances">
              <p class="text btnText">All Attendance</p>
              <input type="checkbox" id="allAttendances-checkbox" />
            </div>
          </div>
          <table class="attendanceTable">
            <thead>
              <tr>
                <th class="text">#</th>
                <th class="text">Student Number</th>
                <th class="text">Student Name</th>
                <th class="text">Absence</th>
                <th class="text status">Attendance Status</th>
              </tr>
            </thead>
            <tbody id="attendanceData">
              <tr th:each="student , stat: ${students}">
                <td class="text" th:text="${student.id}"></td>
                <td class="text" th:text="${student.uniId}">1234567</td>
                <td class="text" th:text="${student.name}"></td>
                <td class="text"><input class="checkbox" name="absent" type="checkbox" th:field="*{attendances[__${stat.index}__].absent}"/></td>
                <td class="text">Present</td>
                <input type="hidden"
                       th:field="*{attendances[__${stat.index}__].studentId}"
                       th:value="${student.id}" />
              </tr>
              <input type="hidden" name="courseId" th:value="${course.courseId}"/>
              <input type="hidden" name="sectionNumber" th:value="${section.sectionNumber}"/>
              <input type="hidden" name="date" th:value="${date}"/>
            </tbody>
          </table>
          <button class="submitButton btn" type="submit">
            Submit Attendance
          </button>
        </form>
      </div>
    </div>
    <script th:src="@{/scripts/scriptDoctor/scriptAttendance.js}"></script>
  </body>
</html>
